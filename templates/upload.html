<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skidbin - Create a new paste</title>

    <link rel="stylesheet" href="/static/styles/skidbin.css">
    <link rel="stylesheet" href="/static/styles/app.min.css">
    <link rel="stylesheet" href="/static/styles/show.min.css">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
</head>

<body class="bin">
    <div class="wrapper">
        <div class="table">
            <a href="" class="show-sidebar show"><i class="fa fa-arrow-right"></i></a>
        </div>
        <div class="editor-container">
            <textarea name="pasteContent" id="paste-content" class="editor mousetrap" wrap="off"
                placeholder="READ OUR TERMS OF SERVICE BEFORE CREATING A POST. Pastes that break TOS will be removed. https://github.com/s7phr/skidbin&#13;READ OUR TERMS OF SERVICE BEFORE CREATING A POST. Pastes that break TOS will be removed. https://github.com/s7phr/skidbin&#13;READ OUR TERMS OF SERVICE BEFORE CREATING A POST. Pastes that break TOS will be removed. https://github.com/s7phr/skidbin"></textarea>
        </div>
    </div>
    <form action="/upload" id="paste-form" method="POST" class="editor-form">
        <!-- Your paste form content -->
    </form>
    <div class="sidebar" style="text-align: center;padding-top: 0;">
        <a class="sidebar-logo" href="/">
            <pre>

____  _    _     _ _     _       
/ ___|| | _(_) __| | |__ (_)_ __  
\___ \| |/ / |/ _` | '_ \| | '_ \ 
___) |   <| | (_| | |_) | | | | |
|____/|_|\_\_|\__,_|_.__/|_|_| |_|
                                                          
</pre>
        </a>
        <div class="options">
            <p style="color:red;" id="paste-error"></p>
            <p style="text-align: center;"><a style="color: #bbaaee;" target="_blank" href="/register">Make an
                    account</a> to manage your pastes.</p>
            <p style="color:#bbaaee;text-align: center;font-size:15px;text-decoration:underline;"><a href="/tos"
                    target="_blank" style="font-weight:bold;color: lightblue;">READ TOS BEFORE POSTING!!</a></p>
            <p> Posts
                that violate our terms WILL be removed.</p>
            <h3>Title:</h3>
            <input type="text" name="pasteTitle" id="paste-title" maxlength="70" value=""
                placeholder="Paste title (no special chars)">
        </div>
        <input type="hidden" id="notify-followers" value="off">
        <div class="options">
            <ul>
                <li><input type="submit" id="create-paste" value="Create" class="button"></li>
                <li><input type="reset" value="Clear" class="button"></li>
            </ul>
        </div>
        <p>Please note that all posted information is publicly available and must follow our <a href="/tos"
                style="text-decoration: underline;">TOS.</a></p>

    </div>

    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var pasteForm = document.getElementById('paste-form');
            var createButton = document.getElementById('create-paste');

            createButton.addEventListener('click', function (event) {
                event.preventDefault();

                var pasteTitle = document.getElementById('paste-title').value;
                var pasteContent = document.getElementById('paste-content').value;
                if (pasteTitle.trim() === '' || pasteContent.trim() === '') {
                    document.getElementById('paste-error').innerText = 'Please provide a title and content for your paste.';
                    return;
                }

                document.getElementById('paste-error').innerText = '';

                var data = {
                    title: pasteTitle,
                    content: pasteContent
                };

                fetch('/api/paste', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Failed to create paste');
                        }
                        return response.json();
                    })
                    .then(responseData => {
                        console.log('Paste created successfully:', responseData);
                    })
                    .catch(error => {
                        console.error('Error creating paste:', error);
                        document.getElementById('paste-error').innerText = 'Failed to create paste. Please try again later.';
                    });
            });
        });

    </script>
</body>

</html>